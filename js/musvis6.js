/* Author: Armstrong Chiu
   URL: https://thewebdesignerpro.com/     */
   
function init(){camera=new THREE.PerspectiveCamera(50,ww/wh,1,5e3),camera.position.set(0,5,-25),scene=new THREE.Scene,scene.fog=new THREE.FogExp2(3094336,.02),camera.lookAt(scene.position),ambientLight=new THREE.AmbientLight(1118481),scene.add(ambientLight),spotLight=new THREE.SpotLight(16777215,2,100,Math.PI/5,.5),spotLight.position.set(0,50,0),spotLight.castShadow=!0,spotLight.shadow.mapSize.width=1024,spotLight.shadow.mapSize.height=1024,spotLight.shadow.camera.near=10,spotLight.shadow.camera.far=200,spotLight.shadow.camera.fov=40,scene.add(spotLight);var e=new THREE.DirectionalLight(16777215,1);e.castShadow=!0,renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(ww,wh),renderer.setClearColor(3094336,1),renderer.shadowMap.enabled=!0,renderer.shadowMapSoft=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.sortObjects=!1;var n=document.getElementById("container");n.appendChild(renderer.domElement),oDio(),langit(function(e){loadBframe(e)}),sahig()}function oDio(){var e=new THREE.AudioListener;camera.add(e);var n=new THREE.Audio(e),t=new THREE.AudioLoader,o=new Audio,a="ogg";o.canPlayType("audio/mp3")&&(a="mp3");var r="aud/128/ironfist2."+a;t.load(r,function(e){n.setBuffer(e),n.setLoop(!0),n.setVolume(.75),n.play()}),analyser1=new THREE.AudioAnalyser(n,256)}function langit(e){var n="imj/map/cube/factory1/",t=".jpg",o=[n+"face-r"+t,n+"face-l"+t,n+"face-t"+t,n+"face-d"+t,n+"face-f"+t,n+"face-b"+t],a=(new THREE.CubeTextureLoader).load(o);return a.format=THREE.RGBFormat,a.mapping=THREE.CubeReflectionMapping,e?e(a):void 0}function loadBframe(e){var n,t=new THREE.MeshPhongMaterial({color:2500134,shininess:20,reflectivity:.4,envMap:e,combine:THREE.MixOperation,transparent:!0,opacity:.6,side:THREE.DoubleSide});uniforms1={time:{type:"f",value:1},alpha:{type:"f",value:1},resolution:{type:"v2",value:new THREE.Vector2}};var o=[["fragment_shader",uniforms1]],a=new THREE.ShaderMaterial({uniforms:o[0][1],vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById(o[0][0]).textContent}),r=new THREE.OBJLoader;r.load("obj/kar/porc/pframe.obj",function(o,r){o.traverse(function(e){e instanceof THREE.Mesh&&(e.material=a,n=e.geometry)}),chewy=o,scene.add(chewy),chewy.scale.set(5,5,5),chewy.position.y=-2;var i=new THREE.Mesh(n,t);scene.add(i),i.scale.set(5.03,5.03,5.03),i.position.y=-1.992,i.castShadow=!0,i.receiveShadow=!0,loadBumpers(e)})}function loadBumpers(e){var n=new THREE.MeshStandardMaterial({color:7829367,roughness:.5,metalness:.4,envMapIntensity:.4,envMap:e}),t=new THREE.OBJLoader;t.load("obj/kar/porc/pbumpers.obj",function(t,o){t.traverse(function(e){e instanceof THREE.Mesh&&(e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals(),e.castShadow=!0,e.receiveShadow=!0,e.material=n)});var a=t;scene.add(a),a.scale.set(5,5,5),a.position.y=-2,loadSideFndrs(e)})}function loadSideFndrs(e){var n=new THREE.MeshStandardMaterial({color:10066329,roughness:.3,metalness:.4,envMapIntensity:.5,envMap:e}),t=new THREE.OBJLoader;t.load("obj/kar/porc/psidefndr.obj",function(t,o){t.traverse(function(e){e instanceof THREE.Mesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=n)});var a=t;scene.add(a),a.scale.set(5,5,5),a.position.y=-2,loadSpoiler(e)})}function loadSpoiler(e){var n=new THREE.MeshStandardMaterial({color:6776679,roughness:.2,metalness:.4,envMapIntensity:.9,envMap:e}),t=new THREE.OBJLoader;t.load("obj/kar/porc/pspoiler.obj",function(t,o){t.traverse(function(e){e instanceof THREE.Mesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=n)});var a=t;scene.add(a),a.scale.set(5,5,5),a.position.y=-2,loadGlass(e)})}function loadGlass(e){var n=new THREE.MeshPhongMaterial({color:15663052,shininess:40,reflectivity:.9,envMap:e,transparent:!0,opacity:.5}),t=new THREE.OBJLoader;t.load("obj/kar/porc/pglass.obj",function(t,o){t.traverse(function(e){e instanceof THREE.Mesh&&(e.material=n)});var a=t;scene.add(a),a.scale.set(5,5,5),a.position.y=-2,loadTires(e)})}function loadTires(e){var n=new THREE.MeshStandardMaterial({color:7368816,emissive:328965,roughness:.6,metalness:.4}),t=new THREE.OBJLoader;t.load("obj/kar/porc/ptire.obj",function(t,o){t.traverse(function(e){e instanceof THREE.Mesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=n)});var a=t;scene.add(a),a.scale.set(5,5,5),a.position.y=-2;var r=a.clone();r.rotation.z=Math.PI,scene.add(r),r.position.y=-4.775;var i=a.clone();i.rotation.x=Math.PI,scene.add(i),i.position.y=-4.775,i.position.z=-.2;var s=r.clone();s.rotation.x=Math.PI,scene.add(s),s.position.y+=2.77,s.position.z=-.2,animate(),loadInterior(),loadBrakes(e)})}function loadBrakes(e){var n=new THREE.MeshStandardMaterial({color:16737826,roughness:.4,metalness:.6}),t=new THREE.OBJLoader;t.load("obj/kar/porc/pbrakes.obj",function(e,t){e.traverse(function(e){e instanceof THREE.Mesh&&(e.receiveShadow=!0,e.material=n)});var o=e;scene.add(o),o.scale.set(5,5,5),o.position.y=-2})}function loadInterior(){var e=new THREE.MeshStandardMaterial({color:12294502,roughness:.5,metalness:.2}),n=new THREE.OBJLoader;n.load("obj/kar/porc/pinterior.obj",function(n,t){n.traverse(function(n){n instanceof THREE.Mesh&&(n.castShadow=!0,n.receiveShadow=!0,n.material=e)});var o=n;scene.add(o),o.scale.set(5,5,5),o.position.y=-2})}function sahig(){var e=new THREE.PlaneBufferGeometry(400,400),n=new THREE.MeshStandardMaterial({color:3094336,roughness:.6,metalness:.2,transparent:!0,opacity:.75}),t=new THREE.Mesh(e,n);t.rotateX(Math.PI/-2),t.position.y=floorPosY,t.receiveShadow=!0,scene.add(t);var o=new THREE.MeshStandardMaterial({color:3094336,roughness:.6,metalness:.2}),a=new THREE.Mesh(e,o);a.rotateX(Math.PI/-2),a.position.y=-5.1,scene.add(a)}function onDocumentMouseMove(e){mouse.x=e.clientX/ww*2-1,mouse.y=2*-(e.clientY/wh)+1}function animate(){var e=clock.getDelta();.003*Date.now();if(ntro&&(po1-=.02,po2+=.04,po1>0?pinfo.style.opacity=po1:(pinfo.style.opacity=0,pinfo.style.display="none",ntro=!1),1>po2?cntnr.style.opacity=po2:cntnr.style.opacity=1),scene.rotation.x>-Math.PI&&scene.rotation.x<Math.PI?scene.rotation.x-=.01*mouse.y:scene.rotation.x=0,scene.rotation.y>2*-Math.PI&&scene.rotation.y<2*Math.PI?scene.rotation.y-=.01*mouse.x:scene.rotation.y=0,analyser1&&(gaf=analyser1.getAverageFrequency()/100),chewy&&uniforms1){Math.random();uniforms1.time.value+=e*gaf*.22,uniforms1.alpha.value=gaf}render(),requestAnimationFrame(animate)}function render(e){renderer.render(scene,camera)}var clock=new THREE.Clock;const floorPosY=-5,rnd1=Math.random(Math.PI);var mouseX=mouseY=mouseZ=0,ww=window.innerWidth,wh=window.innerHeight,wwh=ww/2,whh=wh/2,pis=0,pif=pif2=1,ntro=!0,renderer,camera,scene,controls,stats,cntnr=document.getElementById("container"),nv=document.getElementById("nav"),nvo=document.getElementById("nvo"),srbs=document.getElementById("serbis"),flio=document.getElementById("folio"),kont=document.getElementById("kontak"),srvc=document.getElementById("services"),prtf=document.getElementById("portfolio"),cntc=document.getElementById("contact"),cntnt=document.getElementById("content"),cntnt2=document.getElementById("content2"),cntnt3=document.getElementById("content3"),x1=document.getElementById("x1"),x2=document.getElementById("x2"),x3=document.getElementById("x3"),navOn=!1,popped="0",pinfo=document.getElementById("pinfo2"),po1=1,po2=0,mouse=new THREE.Vector2,plane,uniforms1,analyser1;document.body.style.width=ww+"px",document.body.style.height=wh+"px",cntnr.style.width=ww+"px",cntnr.style.height=wh+"px",cntnt.style.fontSize=(ww+wh)/2*.02;var gaf=0,sphere1,sphere2,ambientLight,chewy;if(Detector.webgl)window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent?window.attachEvent("onload",init):window.onload=init,cntnr.style.opacity=0;else{var warning=Detector.getWebGLErrorMessage();cntnr.appendChild(warning),cntnr.style.backgroundColor="transparent",document.body.style.backgroundImage="url('imj/shade/hom1/hombg.jpg')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"}document.addEventListener("mousemove",onDocumentMouseMove,!1);


