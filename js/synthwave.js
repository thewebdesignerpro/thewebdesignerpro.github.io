/* Author: Armstrong Chiu
   URL: https://thewebdesignerpro.com/     */

var renderer,camera,camera2,scene,scene2,spotL,controls,stats,geometry,material,geom,spotLight,spotLight2,backg,grupo,clock,vertices,vertices2,plane1,plane2,light,ambientLight,analyser1,mouse,sound,bloomPass,composer,mixer,mouseX=mouseY=mouseZ=prevMouseX=0,ww=window.innerWidth,wh=window.innerHeight,wwh=ww/2,whh=wh/2,entro=!0,lookAtScene=!1,bwanGo=!1,cntnr=document.getElementById("container"),nv=document.getElementById("nav"),nvo=document.getElementById("nvo"),srbs=document.getElementById("serbis"),flio=document.getElementById("folio"),kont=document.getElementById("kontak"),srvc=document.getElementById("services"),prtf=document.getElementById("portfolio"),cntc=document.getElementById("contact"),cntnt=document.getElementById("content"),cntnt2=document.getElementById("content2"),cntnt3=document.getElementById("content3"),x1=document.getElementById("x1"),x2=document.getElementById("x2"),x3=document.getElementById("x3"),navOn=!1,popped="0",pinfo=document.getElementById("pinfo2"),po1=1,po2=0,gaf=0,oras=0,retPlane=[],idx=0,params={exposure:1,bloomStrength:1,bloomThreshold:0,bloomRadius:0};if(document.body.style.width=ww+"px",document.body.style.height=wh+"px",cntnr.style.width=ww+"px",cntnr.style.height=wh+"px",cntnt.style.fontSize=(ww+wh)/2*.02,cntnr.style.opacity=0,THREE.WEBGL.isWebGLAvailable())window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent?window.attachEvent("onload",init):window.onload=init,cntnr.style.opacity=0;else{var warning=THREE.WEBGL.getWebGLErrorMessage();cntnr.appendChild(warning),pinfo.style.opacity=0,pinfo.style.display="none",cntnr.style.opacity=1,cntnr.style.backgroundColor="transparent",document.body.style.backgroundImage="url('imj/shade/hom1/hombg.jpg')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"}function init(){grupo=new THREE.Group,clock=new THREE.Clock,mouse=new THREE.Vector2,(camera=new THREE.PerspectiveCamera(40,ww/wh,1,100)).position.set(0,0,4),scene=new THREE.Scene,camera.lookAt(scene.position);var e=new THREE.AmbientLight(4210752);scene.add(e);var n=new THREE.SpotLight(13386939,.2,200,Math.PI/3);n.position.set(0,5,-5),n.castShadow=!1,n.shadow.camera.near=1,n.shadow.camera.far=10,n.shadow.camera.fov=40,scene.add(n),(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1})).setPixelRatio(window.devicePixelRatio),renderer.setSize(ww,wh),renderer.setClearColor(0,1),renderer.shadowMap.enabled=!1,renderer.sortObjects=!1,renderer.toneMapping=THREE.ReinhardToneMapping,cntnr.appendChild(renderer.domElement),postProcesses(),retroPlane(),retroSky(),retroSun(),oDio(),document.addEventListener("mousemove",onDocumentMouseMove,!1)}function postProcesses(){var e=new THREE.RenderPass(scene,camera);(bloomPass=new THREE.UnrealBloomPass(new THREE.Vector2(ww,wh),1.5,.4,.85)).threshold=params.bloomThreshold,bloomPass.strength=params.bloomStrength,bloomPass.radius=params.bloomRadius,(composer=new THREE.EffectComposer(renderer)).addPass(e),composer.addPass(bloomPass),renderer.toneMappingExposure=params.exposure,bloomPass.threshold=params.bloomThreshold,bloomPass.strength=params.bloomStrength,bloomPass.radius=params.bloomRadius}function retroPlane(){(new THREE.TextureLoader).load("imj/retro/grid2.png",function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(32,1);for(var n=0;n<10;n++){var t=new THREE.PlaneGeometry(10,1,32,1),o=new THREE.MeshStandardMaterial({color:13434836,map:e,flatShading:!0});retPlane[n]=new THREE.Mesh(t,o),scene.add(retPlane[n]),retPlane[n].position.y=-.5,retPlane[n].position.z=5-n,retPlane[n].rotation.x=-.5*Math.PI}var r=new THREE.PlaneGeometry(6.8,4,24,10),a=new THREE.MeshStandardMaterial({map:e}),s=new THREE.Mesh(r,a);scene.add(s),s.position.y=-1.3,s.position.z=-6,s.rotation.x=-.5*Math.PI,retroMountain(s),animate()})}function retroMountain(e){(new THREE.TextureLoader).load("imj/retro/shade2.jpg",function(n){e.material.displacementScale=1.8,e.material.displacementMap=n,e.material.needsUpdate=!0})}function retroSky(){(new THREE.TextureLoader).load("imj/retro/retrosky.png",function(e){var n=new THREE.PlaneGeometry(100,6),t=new THREE.MeshStandardMaterial({map:e}),o=new THREE.Mesh(n,t);scene.add(o),o.position.y=2,o.position.z=-7.4})}function retroSun(){(new THREE.TextureLoader).load("imj/retro/retrosun2.png",function(e){var n=new THREE.PlaneGeometry(3.8,3.8),t=new THREE.MeshBasicMaterial({transparent:!0}),o=new THREE.Mesh(n,t);scene.add(o),o.position.y=1.6,o.position.z=-7.3,o.material.map=e,(new THREE.TextureLoader).load("imj/retro/retrosunalpha.png",function(e){o.material.alphaMap=e})})}function oDio(){var e=new THREE.AudioListener;camera.add(e),sound=new THREE.Audio(e);var n=new THREE.AudioLoader,t="ogg";(new Audio).canPlayType("audio/mp3")&&(t="mp3");var o="aud/64/artfce."+t;n.load(o,function(e){sound.setBuffer(e),sound.setLoop(!0),sound.setVolume(.7),analyser1=new THREE.AudioAnalyser(sound,128);var n=document.createElement("div");n.id="noAud",n.innerHTML="START",n.style.display="block",n.style.position="absolute",n.style.margin="auto",n.style.top="40%",n.style.bottom=n.style.left=n.style.right="0",n.style.width="160px",n.style.height="48px",n.style.lineHeight="44px",n.style.fontSize="24px",n.style.textAlign="center",n.style.color="rgba(255, 255, 255, 0.7)",n.style.backgroundColor="rgba(255, 255, 255, 0.15)",n.style.border="2px solid rgba(255, 255, 255, 0.7)",n.style.cursor="pointer",container.addEventListener("click",containerClick,!1),container.appendChild(n)})}function onDocumentMouseMove(e){mouse.x=.25*(e.clientX/ww*2-1),mouse.y=e.clientY/wh*.4-.15,scene&&(camera.rotation.x=-mouse.y,camera.rotation.y=-mouse.x)}function animate(){requestAnimationFrame(animate);clock.getDelta();if(entro&&(po2+=.004,(po1-=.002)>0?pinfo.style.opacity=po1:(pinfo.style.opacity=0,pinfo.style.display="none",entro=!1),cntnr.style.opacity=po2<1?po2:1),analyser1){var e=analyser1.getFrequencyData(),n=.1*analyser1.getAverageFrequency(),t=.4*n,o=.2*n;t>3?t=3:t<.8&&(t=.8),o>1.2?o=1.2:o<.8&&(o=.8),renderer.toneMappingExposure=o,bloomPass.strength=t;for(var r=retPlane[idx].geometry.vertices,a=0;a<33;a++)r[a].z=.0015*e[a];retPlane[idx].geometry.verticesNeedUpdate=!0;for(var s=0;s<10;s++){var i=retPlane[idx].position.z+.025;i>5&&(i=-4),retPlane[idx].position.z=i}idx+=1,idx%=9}render()}function render(){composer.render()}function containerClick(e){e.preventDefault(),sound.play(),noAud.parentNode.removeChild(noAud),container.removeEventListener("click",containerClick,!1)}   




