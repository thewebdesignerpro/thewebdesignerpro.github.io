/* Author: Armstrong Chiu
   URL: https://thewebdesignerpro.com/     */

var clock=new THREE.Clock;const floorPosY=-5,rnd1=Math.random(Math.PI),munPosY=18e3;var renderer,camera,scene,controls,stats,water,waterNormals,mirrorMesh,mun,arw2,plane,uniforms1,analyser1,sound,mouseX=mouseY=mouseZ=0,ww=window.innerWidth,wh=window.innerHeight,wwh=ww/2,whh=wh/2,pis=0,pif=pif2=1,ntro=!0,cntnr=document.getElementById("container"),nv=document.getElementById("nav"),nvo=document.getElementById("nvo"),srbs=document.getElementById("serbis"),flio=document.getElementById("folio"),kont=document.getElementById("kontak"),srvc=document.getElementById("services"),prtf=document.getElementById("portfolio"),cntc=document.getElementById("contact"),cntnt=document.getElementById("content"),cntnt2=document.getElementById("content2"),cntnt3=document.getElementById("content3"),x1=document.getElementById("x1"),x2=document.getElementById("x2"),x3=document.getElementById("x3"),navOn=!1,popped="0",pinfo=document.getElementById("pinfo2"),po1=1,po2=0,munG=new THREE.Group,mouse=new THREE.Vector2,mouseXprev=mouseYprev=camRotX=camRotY=0,parameters={width:2e3,height:2e3,widthSegments:250,heightSegments:250,depth:1500,param:4,filterparam:1};document.body.style.width=ww+"px",document.body.style.height=wh+"px",cntnr.style.width=ww+"px",cntnr.style.height=wh+"px",cntnt.style.fontSize=(ww+wh)/2*.02;var sphere1,sphere2,ambientLight,chewy,gaf=.2;if(Detector.webgl)window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent?window.attachEvent("onload",init):window.onload=init,cntnr.style.opacity=0;else{var warning=Detector.getWebGLErrorMessage();cntnr.appendChild(warning),cntnr.style.backgroundColor="transparent",document.body.style.backgroundImage="url('imj/shade/hom1/hombg.jpg')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"}function init(){(camera=new THREE.PerspectiveCamera(55,ww/wh,.5,3e6)).position.set(0,5,-25),camera.position.set(0,5,50),camera.position.set(0,60,2e3),scene=new THREE.Scene,camera.lookAt(scene.position),ambientLight=new THREE.AmbientLight(13421772),scene.add(ambientLight),spotLight=new THREE.SpotLight(16777215,2,100,Math.PI/4,.5),spotLight.position.set(0,50,-50),spotLight.castShadow=!0,spotLight.shadow.mapSize.width=1024,spotLight.shadow.mapSize.height=1024,spotLight.shadow.camera.near=10,spotLight.shadow.camera.far=200,spotLight.shadow.camera.fov=60,new THREE.DirectionalLight(16777215,1).castShadow=!0,(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(ww,wh),renderer.setClearColor(0,1),renderer.shadowMap.enabled=!1,renderer.shadowMapSoft=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.sortObjects=!1,document.getElementById("container").appendChild(renderer.domElement),oDio(),langit(),dagat(),bwan1(),bwan2(),animate()}function oDio(){var e=new THREE.AudioListener;camera.add(e),sound=new THREE.Audio(e);var t=new THREE.AudioLoader,n="ogg";(new Audio).canPlayType("audio/mp3")&&(n="mp3");var o="aud/128/wygone."+n;t.load(o,function(e){sound.setBuffer(e),sound.setLoop(!0),sound.setVolume(.9),analyser1=new THREE.AudioAnalyser(sound,256);var t=document.createElement("div");t.id="noAud",t.innerHTML="START",t.style.display="block",t.style.position="absolute",t.style.margin="auto",t.style.top="40%",t.style.bottom=t.style.left=t.style.right="0",t.style.width="160px",t.style.height="48px",t.style.lineHeight="44px",t.style.fontSize="24px",t.style.textAlign="center",t.style.color="rgba(255, 255, 255, 0.7)",t.style.backgroundColor="rgba(255, 255, 255, 0.15)",t.style.border="2px solid rgba(255, 255, 255, 0.7)",t.style.cursor="pointer",container.addEventListener("click",containerClick,!1),container.appendChild(t)})}function langit(){var e="imj/map/cube/space1/",t=[e+"a6.jpg",e+"a6.jpg",e+"a6.jpg",e+"a6.jpg",e+"a6.jpg",e+"a6.jpg"],n=(new THREE.CubeTextureLoader).load(t);n.format=THREE.RGBFormat;var o=THREE.ShaderLib.cube;o.uniforms.tCube.value=n;var a=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:o.uniforms,depthWrite:!1,side:THREE.BackSide}),r=new THREE.Mesh(new THREE.BoxGeometry(1e6,1e6,1e6),a);scene.add(r)}function dagat(){var e=new THREE.DirectionalLight(16777215,1);e.castShadow=!1,e.position.set(0,.2,-1),scene.add(e),waterNormals=(new THREE.TextureLoader).load("imj/shade/watnorm4.jpg",function(t){t.wrapS=t.wrapT=THREE.RepeatWrapping,water=new THREE.Water(renderer,camera,scene,{textureWidth:512,textureHeight:512,waterNormals:t,alpha:1,sunDirection:e.position.clone().normalize(),sunColor:10725807,waterColor:202255,distortionScale:60,fog:null!=scene.fog}),(mirrorMesh=new THREE.Mesh(new THREE.PlaneBufferGeometry(500*parameters.width,500*parameters.height),water.material)).add(water),mirrorMesh.rotation.x=.5*-Math.PI,mirrorMesh.position.y=0,scene.add(mirrorMesh)})}function bwan1(){(new THREE.TextureLoader).load("imj/mun.jpg",function(e){var t=new THREE.MeshStandardMaterial({color:14544639,map:e,emissive:7833753,emissiveIntensity:1.3,fog:!1});(mun=new THREE.Mesh(new THREE.SphereBufferGeometry(24e3,24,24),t)).position.set(0,munPosY,-1e5),mun.castShadow=!1,mun.receiveShadow=!1,munG.add(mun)},function(e){},function(e){})}function bwan2(){(new THREE.TextureLoader).load("imj/arw2.png",function(e){var t=new THREE.PlaneBufferGeometry(2e5,2e5),n=new THREE.MeshBasicMaterial({color:13426158,map:e,transparent:!0,fog:!1,depthWrite:!1,depthTest:!0});(arw2=new THREE.Mesh(t,n)).position.set(0,munPosY,-112e3),arw2.castShadow=!1,arw2.receiveShadow=!1,munG.add(arw2);t=new THREE.PlaneBufferGeometry(48e4,3e5);var o=new THREE.MeshBasicMaterial({color:6719658,map:e,transparent:!0,opacity:.35,fog:!1,depthWrite:!1,depthTest:!0}),a=new THREE.Mesh(t,o);a.position.set(0,munPosY/2,-115e3),a.castShadow=!1,a.receiveShadow=!1,munG.add(a),scene.add(munG)},function(e){},function(e){})}function bwan3(){(new THREE.TextureLoader).load("imj/arw2.png",function(e){var t=new THREE.PlaneBufferGeometry(48e4,3e5),n=new THREE.MeshBasicMaterial({color:6719658,map:e,transparent:!0,opacity:.35,fog:!1,depthWrite:!1,depthTest:!0}),o=new THREE.Mesh(t,n);o.position.set(0,munPosY,-115e3),o.position.set(0,munPosY/2,-115e3),o.castShadow=!1,o.receiveShadow=!1,munG.add(o),scene.add(munG)},function(e){},function(e){})}function sahig(){var e=new THREE.PlaneBufferGeometry(400,400),t=new THREE.MeshStandardMaterial({color:3094336,roughness:.6,metalness:.2,transparent:!0,opacity:.75}),n=new THREE.Mesh(e,t);n.rotateX(Math.PI/-2),n.position.y=floorPosY,n.receiveShadow=!0,scene.add(n);var o=new THREE.MeshStandardMaterial({color:3094336,roughness:.6,metalness:.2}),a=new THREE.Mesh(e,o);a.rotateX(Math.PI/-2),a.position.y=floorPosY-.1,scene.add(a)}function onDocumentMouseMove(e){mouse.x=e.clientX/ww*2-1,mouse.y=-e.clientY/wh*2+1}function onDocumentMouseMove(e){var t,n;mouseX=e.clientX-wwh,mouseY=e.clientY-whh,wwh>whh?(t=-6e-4*mouseY,n=-3e-4*mouseX):(t=-3e-4*mouseY,n=-8e-4*mouseX),camRotX=t,camRotY=n,camera&&(camera.rotation.x=camRotX,camera.rotation.y=camRotY),mouseXprev=mouseX,mouseYprev=mouseY}function onDeviceOrientationChange(e){e.beta&&(camRotX=THREE.Math.degToRad(e.beta)),e.gamma&&(camRotY=THREE.Math.degToRad(e.gamma)),camera&&(ww<wh?(camera.rotation.x=camRotX/2,camera.rotation.y=camRotY):(camera.rotation.x=camRotY,camera.rotation.y=camRotX/2))}function animate(){clock.getDelta(),Date.now();ntro&&(po2+=.004,(po1-=.002)>0?pinfo.style.opacity=po1:(pinfo.style.opacity=0,pinfo.style.display="none",ntro=!1),cntnr.style.opacity=po2<1?po2:1),analyser1&&(gaf=analyser1.getAverageFrequency()/100),mun&&(mun.material.emissiveIntensity=.6*gaf+.8),arw2&&(arw2.material.opacity=.6*gaf+.6),render(),requestAnimationFrame(animate)}function render(e){water&&(water.material.uniforms.time.value-=(gaf-.1+.2)/60,water.render()),renderer.render(scene,camera)}function containerClick(e){e.preventDefault(),sound.play(),noAud.parentNode.removeChild(noAud),container.removeEventListener("click",containerClick,!1)}document.addEventListener("mousemove",onDocumentMouseMove,!1);