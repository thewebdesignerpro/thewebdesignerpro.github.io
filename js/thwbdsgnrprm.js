/**
 * author Armstrong "Army" Chiu
 * URL: https://thewebdesignerpro.com/     
 */
 
 
import*as THREE from"three";import WebGL from"three/addons/capabilities/WebGL.js";const idleTO=120,florY=-10,ceilY=140;let camera,scene,renderer,clock;const grups=[];let mixer,isMobil=!1,mouseX=0,mouseY=-50;const ui={},_={},x={};if(WebGL.isWebGL2Available())window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent?window.attachEvent("onload",init):window.onload=init;else{const e=WebGL.getWebGL2ErrorMessage();kontainer.appendChild(e),kontainer.style.background="url('img/thewebdesignerprol.jpg') center top no-repeat",kontainer.style.backgroundSize="cover",fader.style.opacity=0,fader.style.display="none",fader.parentNode.removeChild(fader),cL(loadr,0,"paus"),loadr.style.display="none",loadr.parentNode.removeChild(loadr)}function eL(e,t,n,o){0==t?e.addEventListener(n,o,!1):e.removeEventListener(n,o,!1)}function cL(e,t,n){0==t?e.classList.contains(n)||e.classList.add(n):e.classList.contains(n)&&e.classList.remove(n)}function init(){function e(e){return document.getElementById(e)}ui.kontainer=e("kontainer"),ui.btTop=e("btTop"),ui.loadr=e("loadr"),ui.fader=e("fader"),ui.fader.style.opacity=1;let t=document.createElement("div");t.setAttribute("id","dummy"),document.body.appendChild(t),isMobil="9000px"!=window.getComputedStyle(t,null).getPropertyValue("left"),isMobil&&(document.addEventListener("gesturechange",(function(e){e.preventDefault()}),!1),ui.kontainer.addEventListener("gesturechange",(function(e){e.preventDefault()}),!1),_.prevW=_.prevH=0),t.parentNode.removeChild(t),_.width=window.innerWidth,_.height=window.innerHeight,ui.kontainer.style.backgroundColor="#000000";if(_.ej=[],_.ej[0]=0,_.ej[1]=-2,_.ej[2]=Math.PI,_.ej[3]=0,_.ej[4]=0,_.ej[5]=0,x.xx=400,renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(_.width,_.height),renderer.setClearColor(0,1),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.outputColorSpace=THREE.LinearSRGBColorSpace,renderer.sortObjects=!1,ui.kontainer.appendChild(renderer.domElement),!1===renderer.capabilities.isWebGL2&&!renderer.extensions.get("OES_texture_float"))throw alert("OES_texture_float not supported"),"missing webgl extension";if(!1===renderer.capabilities.isWebGL2&&!renderer.extensions.get("OES_texture_float_linear"))throw alert("OES_texture_float_linear not supported"),"missing webgl extension";scene=new THREE.Scene,x.camGrup=new THREE.Group,grups[0]=new THREE.Group,grups[1]=new THREE.Group,camera=new THREE.PerspectiveCamera(50,_.width/_.height,.5,2e4),camera.position.set(0,0,1280),x.camGrup.add(camera),scene.add(new THREE.AmbientLight(3355443));const n=new THREE.DirectionalLight(16776434,4);n.position.set(-1,0,0),scene.add(n),scene.add(x.camGrup),eL(window,1,"load",init),eL(window,0,"resize",onWindowResize),clock=new THREE.Clock,clock.autoStart=!1,_.mouse=new THREE.Vector2,_.entro=!0,_.idleTimer=0,_.fokus=!0,_.pointer=new THREE.Vector2,_.ptrDown=!1,_.skrolY=!0,x.currGrup=0,x.targetO=new THREE.Object3D,x.target1=new THREE.Object3D,x.target1.position.set(-200,0,x.camGrup.position.z),scene.add(x.target1),addSkybox()}function addSkybox(){const e=".png",t=new THREE.CubeTextureLoader;t.setPath("img/skybox/5/"),t.load(["posx"+e,"negx"+e,"posy"+e,"negy"+e,"posz"+e,"negz"+e],(function(e){x.skybox=e,scene.background=x.skybox,addEarth(),addMoon()}))}function addEarth(){const e=new THREE.SphereGeometry(400,80,40),t=new THREE.MeshStandardMaterial({color:16777215,emissive:12500670,roughness:.6});x.Earth=new THREE.Mesh(e,t),x.Earth.position.set(300,0,0),grups[0].add(x.Earth),scene.add(grups[0]);const n=new THREE.PlaneGeometry(950,950),o=new THREE.MeshBasicMaterial({color:11195903,transparent:!0,opacity:0});o.depthWrite=!1,x.mGlow=new THREE.Mesh(n,o),x.mGlow.position.set(250,0,0),grups[0].add(x.mGlow);const a=new THREE.SphereGeometry(402.8,80,40),i=new THREE.MeshStandardMaterial({color:16777215,transparent:!0,opacity:0});i.depthWrite=!1,x.Clouds=new THREE.Mesh(a,i),x.Clouds.position.set(300,0,0),grups[0].add(x.Clouds);let r=new THREE.TextureLoader,d=new THREE.TextureLoader,s=new THREE.TextureLoader,l=new THREE.TextureLoader,c=new THREE.TextureLoader,u="clouds3k";isMobil&&(u="clouds2k"),r.load("img/earth/color4.jpg",(function(e){x.Earth.material.map=e,x.Earth.material.needsUpdate=!0,addSun()})),d.load("img/earth/emissive1.jpg",(function(e){x.Earth.material.emissiveMap=e,x.Earth.material.needsUpdate=!0})),s.load("img/earth/rough1.jpg",(function(e){x.Earth.material.roughnessMap=e,x.Earth.material.needsUpdate=!0})),l.load("img/spotL3.jpg",(function(e){x.mGlow.material.alphaMap=e,x.mGlow.material.opacity=.73,x.mGlow.material.needsUpdate=!0})),c.load("img/earth/"+u+".jpg",(function(e){x.Clouds.material.alphaMap=e,x.Clouds.material.opacity=1,x.Clouds.material.needsUpdate=!0}))}function addMoon(){const e=new THREE.SphereGeometry(109,38,19),t=new THREE.MeshStandardMaterial({color:16777215,roughness:.5});x.Moon=new THREE.Mesh(e,t),x.Moon.position.set(-500,0,-400),x.Moon.rotation.set(0,Math.PI/-4,0),grups[0].add(x.Moon);let n=new THREE.TextureLoader,o=new THREE.TextureLoader;n.load("img/earth/moon/color2k.jpg",(function(e){x.Moon.material.map=e,x.Moon.material.needsUpdate=!0})),o.load("img/earth/moon/bump1.jpg",(function(e){x.Moon.material.bumpScale=1,x.Moon.material.bumpMap=e,x.Moon.material.needsUpdate=!0}))}function addSun(){const e=new THREE.PlaneGeometry(3e3,3e3),t=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1});t.depthWrite=!1,x.Sun=new THREE.Mesh(e,t),x.Sun.position.set(-3e3,0,0),x.Sun.rotation.set(0,Math.PI/2,0),grups[0].add(x.Sun);const n=new THREE.PlaneGeometry(1e4,1e4),o=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.4});o.depthWrite=!1,x.SunBg=new THREE.Mesh(n,o),x.SunBg.position.set(-3000.1,0,-100),x.SunBg.rotation.set(0,Math.PI/2,0),grups[0].add(x.SunBg);let a=new THREE.TextureLoader,i=new THREE.TextureLoader;a.load("img/sun/color1.jpg",(function(e){x.Sun.material.map=x.SunBg.material.map=e,x.Sun.material.needsUpdate=x.SunBg.material.needsUpdate=!0})),i.load("img/sun/alfa1.jpg",(function(e){x.Sun.material.alphaMap=x.SunBg.material.alphaMap=e,x.Sun.material.needsUpdate=x.SunBg.material.needsUpdate=!0,fadeScene()}))}function fadeScene(){!function e(){let t=parseFloat(ui.fader.style.opacity);(t-=.05)<0?(ui.fader.style.opacity=0,ui.fader.style.display="none",ui.fader.parentNode.removeChild(ui.fader),onWindowResize(),eL(ui.kontainer,0,"pointerdown",onPointerDown),eL(ui.kontainer,0,"pointermove",onPointerMove),eL(document,0,"scrollend",onScrollEnd),eL(ui.btTop,0,"click",clickbtTop),x.camV3=new THREE.Vector3,animate(),imgSRCs(),cL(ui.loadr,0,"paus"),ui.loadr.style.display="none",ui.loadr.parentNode.removeChild(ui.loadr)):(ui.fader.style.opacity=t,requestAnimationFrame(e))}()}function imgSRCs(){const e=document.getElementsByClassName("lzy"),t=["Silent Road","Bamboo Forest","Space Sim","Ancient Courtyard","Moon Cat","The Wanderer","Space Man","Liminal Suburbs","Night City","Architectural Visualization","Earth Night Lights","Bedroom Design","Car Visualization","Vaporwave","Flight","The Backrooms","Winter","Skeletal Animation","Moon Lake","Dynamic Car Paint","Face Morph","Lighthouse ( WebGPU )","Night Drive ( WebGPU )","Cyberpunk (WebGPU)"];for(let n=0;n<e.length;n++)e[n].attributes.title.value=e[n].children[0].attributes.alt.value=t[n],e[n].children[0].attributes.src.value="imj/folio082025/"+(n+12)+".jpg"}function onPointerDown(e){e&&e.preventDefault();let t={};e.clientX?(t.x=e.clientX/_.width*2-1,t.y=-e.clientY/_.height*2+1):(t.x=e.x/_.width*2-1,t.y=-e.y/_.height*2+1),_.ptrDown=!0,_.pointer.x=t.x,_.pointer.y=t.y,_.idleTimer=0}function onPointerMove(e){e&&e.preventDefault();let t={};e.clientX?(t.x=e.clientX/_.width*2-1,t.y=-e.clientY/_.height*2+1):(t.x=e.x/_.width*2-1,t.y=-e.y/_.height*2+1),_.pointer.x=t.x,_.pointer.y=t.y,_.idleTimer=0}function wheelE(e){e&&e.preventDefault(),_.idleTimer=0}function onScrollEnd(e){let t=window.scrollY;t!=window.pageYOffset&&(t=window.pageYOffset),_.skrolY=t<_.height,_.idleTimer=0}function clickbtTop(e){e&&e.preventDefault(),document.body.scrollTop=0,document.documentElement.scrollTop=0,_.idleTimer=0}function onWindowResize(){_.width=window.innerWidth,_.height=window.innerHeight,_.widthH=_.width/2,_.heightH=_.height/2,camera.aspect=_.width/_.height,camera.updateProjectionMatrix(),renderer.setSize(_.width,_.height),x.xx=400,_.width>_.height?(isMobil&&(x.xx=800),x.target1.position.x=-200):(isMobil&&(x.xx=1100),x.target1.position.x=0),_.idleTimer=0}function animate(){if(requestAnimationFrame(animate),_.idleTimer<idleTO&&_.skrolY){clock.running||clock.start();const e=2e-4*Date.now();if(isMobil){const t=Math.sin(e);camera.position.x=t*x.xx;const n=700*t;camera.position.y=n,x.camGrup.rotation.y=.6*Math.cos(e)}else{camera.position.x=_.pointer.x*x.xx;const t=700*_.pointer.y;camera.position.y=t,x.camGrup.rotation.y=.6*Math.cos(e)}x.SunBg.material.opacity=x.camGrup.rotation.y;let t=x.Earth.rotation.y+.003;t>=2*Math.PI&&(t%=2*Math.PI),x.Earth.rotation.y=t;let n=x.Clouds.rotation.y+.0045;n>=2*Math.PI&&(n%=2*Math.PI),x.Clouds.rotation.y=n,_.idleTimer+=.01,render()}else clock.running&&clock.stop(),x.sound&&x.sound.isPlaying&&x.sound.pause();document.hasFocus()?_.fokus||(_.idleTimer=0,_.fokus=!0,x.sound&&(x.sound.isPlaying||x.sound.play())):(_.idleTimer=idleTO,_.fokus=!1,x.sound&&x.sound.isPlaying&&x.sound.pause())}function render(){camera.lookAt(x.target1.position),x.mGlow.lookAt(camera.getWorldPosition(x.camV3)),renderer.render(scene,camera)}
	