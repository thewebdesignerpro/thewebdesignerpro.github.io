/* Author: Armstrong Chiu
   URL: https://thewebdesignerpro.com/     */
function init(){camera=new THREE.PerspectiveCamera(60,ww/wh,.1,2e3),camera.position.set(0,-140,30),camera.position.set(0,50,140),camera.position.set(0,50,180),camera.position.set(0,53,-180),camera.position.set(180,53,0),camera.position.set(-180,53,0),camera.position.set(0,50,160),scene=new THREE.Scene,camera.lookAt(scene.position),ambientLight=new THREE.AmbientLight(657930);var e=new THREE.SpotLight(16777215,2,200,Math.PI/4,1);e.position.set(0,60,100),e.position.set(0,100,-100),e.castShadow=!1,scene.add(e),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(ww,wh),renderer.setClearColor(0,1),renderer.shadowMap.enabled=!1,renderer.sortObjects=!1;var n=document.getElementById("container");n.appendChild(renderer.domElement),backDrop(function(e){viz(e)}),oDio(),animate()}function backDrop(e){var n=(new THREE.CubeTextureLoader).setPath("imj/map/cube/tntlndn6/").load(["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]);return n.format=THREE.RGBFormat,n.mapping=THREE.CubeReflectionMapping,e?e(n):void 0}function oDio(){var e=new THREE.AudioListener;camera.add(e);sound1=new THREE.Audio(e),t=new THREE.AudioLoader,o=new Audio,a="mp3";o.canPlayType("audio/ogg")&&(a="ogg");var r="aud/128/klsk/cncrtnFmnr."+a;t.load(r,function(e){sound1.setBuffer(e),sound1.setLoop(!0),sound1.setVolume(1),analyser1=new THREE.AudioAnalyser(sound1,256);var tempDiv = document.createElement("div");tempDiv.id = "noAud",tempDiv.innerHTML = "START",tempDiv.style.display = "block",tempDiv.style.position = "absolute",tempDiv.style.margin = "auto",tempDiv.style.top = "40%",tempDiv.style.bottom = tempDiv.style.left = tempDiv.style.right = "0",tempDiv.style.width = "160px",tempDiv.style.height = "48px",tempDiv.style.lineHeight = "44px",tempDiv.style.fontSize = "24px",tempDiv.style.textAlign = "center",tempDiv.style.color = "rgba(255, 255, 255, 0.7)",tempDiv.style.backgroundColor = "rgba(255, 255, 255, 0.15)",tempDiv.style.border = "2px solid rgba(255, 255, 255, 0.7)",tempDiv.style.cursor = "pointer",document.getElementById("container").addEventListener( 'click', containerClick, false ),document.getElementById("container").appendChild(tempDiv)})}function viz(e){var n=new THREE.TextureLoader;n.load("imj/shade/wat/rstones.jpg",function(n){n.wrapS=n.wrapT=THREE.RepeatWrapping;var t=new THREE.RingGeometry(.1,150,40,50),o=new THREE.MeshPhongMaterial({map:n,specular:4210752,shininess:20,envMap:e,reflectivity:1.4});plane1=new THREE.Mesh(t,o),plane1.position.y=15,plane1.rotation.x=-Math.PI/2,scene.add(plane1),vertices=plane1.geometry.vertices},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("Error loading texture")})}function onDocumentMouseMove(e){mouse.x=e.clientX/ww*2-1,mouse.y=e.clientY/wh-.135,scene&&(scene.rotation.x=mouse.y,scene.rotation.y=mouse.x)}function animate(){.003*Date.now();if(ntro&&(po1-=.002,po2+=.002,po1>0?pinfo.style.opacity=po1:(pinfo.style.opacity=0,pinfo.style.display="none",ntro=!1),1>po2?cntnr.style.opacity=po2:(cntnr.style.opacity=1,ntro=!1)),plane1&&analyser1){analyser1.getFrequencyData();for(var e=0;40>e;e++){var n=vertices[e];n.z=analyser1.data[0]*-.07}for(var e=40;2040>e;e+=40)for(var t=Math.round(e/40),o=0;40>o;o++){var a=e+o,n=vertices[a];n.z=analyser1.data[t]*-.07}plane1.geometry.verticesNeedUpdate=!0,plane1.geometry.computeVertexNormals(),plane1.geometry.computeFaceNormals()}rndr(),requestAnimationFrame(animate)}function rndr(){renderer.render(scene,camera)}var clock=new THREE.Clock;const floorPosY=-20,rnd1=Math.random(Math.PI);var mouseX=mouseY=mouseZ=0,ww=window.innerWidth,wh=window.innerHeight,wwh=ww/2,whh=wh/2,pis=0,pif=pif2=1,ntro=!0,renderer,camera,scene,controls,stats,cntnr=document.getElementById("container"),nv=document.getElementById("nav"),nvo=document.getElementById("nvo"),srbs=document.getElementById("serbis"),flio=document.getElementById("folio"),kont=document.getElementById("kontak"),srvc=document.getElementById("services"),prtf=document.getElementById("portfolio"),cntc=document.getElementById("contact"),cntnt=document.getElementById("content"),cntnt2=document.getElementById("content2"),cntnt3=document.getElementById("content3"),x1=document.getElementById("x1"),x2=document.getElementById("x2"),x3=document.getElementById("x3"),navOn=!1,popped="0",pinfo=document.getElementById("pinfo2"),po1=1,po2=0,grupo=new THREE.Group,mouse=new THREE.Vector2;document.body.style.width=ww+"px",document.body.style.height=wh+"px",cntnr.style.width=ww+"px",cntnr.style.height=wh+"px",cntnt.style.fontSize=(ww+wh)/2*.02;var gaf=0,vertices,plane1,plane2,light,ambientLight,oras=0,analyser1,sound1;if(Detector.webgl)window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent?window.attachEvent("onload",init):window.onload=init,cntnr.style.opacity=0;else{var warning=Detector.getWebGLErrorMessage();cntnr.appendChild(warning),cntnr.style.backgroundColor="transparent",document.body.style.backgroundImage="url('imj/shade/hom1/hombg.jpg')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"}document.addEventListener("mousemove",onDocumentMouseMove,!1);   
function containerClick(e) {e.preventDefault();sound1.play();noAud.parentNode.removeChild(noAud);document.getElementById("container").removeEventListener( 'click', containerClick, false );}


