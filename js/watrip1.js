/* Author: Armstrong Chiu
   URL: https://thewebdesignerpro.com/     */

var renderer,camera,camera2,scene,scene2,spotL,controls,stats,geometry,material,geom,spotLight,spotLight2,backg,grupo,clock,vertices,vertices2,plane1,plane2,light,ambientLight,analyser1,mouse,sound,mouseX=mouseY=mouseZ=prevMouseX=0,ww=window.innerWidth,wh=window.innerHeight,wwh=ww/2,whh=wh/2,entro=!0,lookAtScene=!1,bwanGo=!1,cntnr=document.getElementById("container"),nv=document.getElementById("nav"),nvo=document.getElementById("nvo"),srbs=document.getElementById("serbis"),flio=document.getElementById("folio"),kont=document.getElementById("kontak"),srvc=document.getElementById("services"),prtf=document.getElementById("portfolio"),cntc=document.getElementById("contact"),cntnt=document.getElementById("content"),cntnt2=document.getElementById("content2"),cntnt3=document.getElementById("content3"),x1=document.getElementById("x1"),x2=document.getElementById("x2"),x3=document.getElementById("x3"),navOn=!1,popped="0",pinfo=document.getElementById("pinfo2"),po1=1,po2=0,gaf=0,oras=0;if(document.body.style.width=ww+"px",document.body.style.height=wh+"px",cntnr.style.width=ww+"px",cntnr.style.height=wh+"px",cntnt.style.fontSize=(ww+wh)/2*.02,cntnr.style.opacity=0,Detector.webgl)window.addEventListener?window.addEventListener("load",init0,!1):window.attachEvent?window.attachEvent("onload",init0):window.onload=init0,cntnr.style.opacity=0;else{var warning=Detector.getWebGLErrorMessage();cntnr.appendChild(warning),pinfo.style.opacity=0,pinfo.style.display="none",cntnr.style.opacity=1,cntnr.style.backgroundColor="transparent",document.body.style.backgroundImage="url('imj/shade/hom1/hombg.jpg')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"}function init0(){extract.load(["./js/90/three.hex"],init)}function init(){grupo=new THREE.Group,clock=new THREE.Clock,mouse=new THREE.Vector2,(camera=new THREE.PerspectiveCamera(60,ww/wh,.1,1e4)).position.set(0,25,160),(scene=new THREE.Scene).fog=new THREE.FogExp2(329220,.001),camera.lookAt(scene.position);var e=new THREE.SpotLight(16777215,1,200,Math.PI/3,.7);e.position.set(0,100,120),e.castShadow=!1,scene.add(e),(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1})).setPixelRatio(window.devicePixelRatio),renderer.setSize(ww,wh),renderer.setClearColor(0,1),renderer.shadowMap.enabled=!1,renderer.sortObjects=!1,cntnr.appendChild(renderer.domElement),backDrop(function(e){viz(e)}),oDio(),document.addEventListener("mousemove",onDocumentMouseMove,!1)}function backDrop(e){var n=(new THREE.CubeTextureLoader).setPath("imj/map/cube/creek2/").load(["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]);n.format=THREE.RGBFormat,n.mapping=THREE.CubeReflectionMapping,scene.background=n;var t=new THREE.CylinderBufferGeometry(9e3,9e3,300,32),o=new THREE.MeshBasicMaterial({color:0,transparent:!0,opacity:.96,side:THREE.BackSide,fog:!1}),r=new THREE.Mesh(t,o);if(scene.add(r),e)return e(n)}function oDio(){var e=new THREE.AudioListener;camera.add(e),sound=new THREE.Audio(e);var n=new THREE.AudioLoader,t="ogg";(new Audio).canPlayType("audio/mp3")&&(t="mp3");var o="aud/64/etf."+t;n.load(o,function(e){sound.setBuffer(e),sound.setLoop(!0),sound.setVolume(1),analyser1=new THREE.AudioAnalyser(sound,128);var n=document.createElement("div");n.id="noAud",n.innerHTML="START",n.style.display="block",n.style.position="absolute",n.style.margin="auto",n.style.top="40%",n.style.bottom=n.style.left=n.style.right="0",n.style.width="160px",n.style.height="48px",n.style.lineHeight="44px",n.style.fontSize="24px",n.style.textAlign="center",n.style.color="rgba(255, 255, 255, 0.7)",n.style.backgroundColor="rgba(255, 255, 255, 0.15)",n.style.border="2px solid rgba(255, 255, 255, 0.7)",n.style.cursor="pointer",container.addEventListener("click",containerClick,!1),container.appendChild(n)})}function viz(e){(new THREE.TextureLoader).load("imj/shade/rock/r1.jpg",function(n){n.wrapS=n.wrapT=THREE.RepeatWrapping;var t=new THREE.RingGeometry(.1,500,40,60),o=new THREE.MeshPhysicalMaterial({color:5066061,map:n,metalness:.2,clearCoat:.8,clearCoatRoughness:.2,envMap:e,envMapIntensity:.9,reflectivity:.9});(plane1=new THREE.Mesh(t,o)).position.y=15,plane1.rotation.x=-Math.PI/2,plane1.rotation.z=Math.PI/2,scene.add(plane1),vertices=plane1.geometry.vertices;var r=new THREE.RingGeometry(500,1e4,40,1);(plane2=new THREE.Mesh(r,o)).position.y=15,plane2.rotation.x=-Math.PI/2,plane2.rotation.z=Math.PI/2,scene.add(plane2),vertices2=plane2.geometry.vertices,animate()},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("Error loading texture")})}function onDocumentMouseMove(e){mouse.x=e.clientX/ww*2-1,mouse.y=e.clientY/wh-.16,scene&&(camera.rotation.x=-mouse.y,camera.rotation.y=-mouse.x)}function animate(){requestAnimationFrame(animate);Date.now();if(entro&&(po2+=9e-4,(po1-=8e-4)>0?pinfo.style.opacity=po1:(pinfo.style.opacity=0,pinfo.style.display="none",entro=!1),cntnr.style.opacity=po2<1?po2:1),plane1&&analyser1){for(var e=-.2*analyser1.getAverageFrequency(),n=2440;n>40;n-=40){Math.round(n/40);for(var t=40;t>0;t--){var o=n-t,r=vertices[o-40];vertices[o].z=r.z}}for(n=40;n>-1;n--){vertices[n].z=e}plane2.position.y=vertices[2439].z+15,plane1.geometry.verticesNeedUpdate=!0,plane1.geometry.computeVertexNormals(),plane1.geometry.computeFaceNormals()}render()}function render(){renderer.render(scene,camera)}function containerClick(e){e.preventDefault(),sound.play(),noAud.parentNode.removeChild(noAud),container.removeEventListener("click",containerClick,!1)}