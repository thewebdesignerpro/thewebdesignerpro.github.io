(function(){var t,i=function(t,i){return function(){return t.apply(i,arguments)}};t=function(){function t(t){this.displayProgress=i(this.displayProgress,this),this.getRandomTrack=i(this.getRandomTrack,this),this.setTrackFromHash=i(this.setTrackFromHash,this),this.setTrack=i(this.setTrack,this),this.ontrackchange=i(this.ontrackchange,this),this.onnext=i(this.onnext,this),this.onprev=i(this.onprev,this),this.onstop=i(this.onstop,this),this.onresume=i(this.onresume,this),this.onpause=i(this.onpause,this),this.onplay=i(this.onplay,this),this.hide=i(this.hide,this),this.show=i(this.show,this),this.updateSize=i(this.updateSize,this),this.autoHide=i(this.autoHide,this);var n=this;this.$container=$(t),this.$controlsContainer=$(".player-controls",this.$container),this.$playlistContainer=$(".player-playlist-container",this.$container),this.$progressContainer=$(".player-progress-container",this.$container),this.$progressBar=$(".player-progress-bar",this.$container),this.$progressText=$(".player-progress-text",this.$container),this.$playlist=$(".player-playlist",this.$container),this.$prevBtn=$(".player-prev",this.$container),this.$nextBtn=$(".player-next",this.$container),this.$playBtn=$(".player-play",this.$container),this.$stopBtn=$(".player-stop",this.$container),this.$pauseBtn=$(".player-pause",this.$container),this.$prevBtn.click(function(){return!1}),this.$nextBtn.click(function(){return!1}),this.$stopBtn.click(function(){return n.stop()}),this.$pauseBtn.click(function(){return n.pause()}),this.$playBtn.click(function(){return"paused"===n.current?n.resume():n.play()}),this.$progressContainer.click(function(t){var i;return i=(t.clientX-n.$progressContainer.offset().left)/n.$progressContainer.width(),"function"==typeof n.progressCallback?n.progressCallback(i):void 0}),this.$playlist.click(function(t){var i,e;return e=$(t.target),e.is("li")?(i=$("li",n.$playlist),n.setTrack(i.index(e))):void 0}),this.$container.on("mousewheel",function(t){return t.stopPropagation()}),this.updateSize(),$(window).resize(this.updateSize),$(window).on("hashchange",this.setTrackFromHash)}return t.prototype.autoHide=function(){},t.prototype.updateSize=function(){return this.$playlistContainer.height(this.$container.innerHeight()-this.$controlsContainer.outerHeight(!0)-this.$progressContainer.outerHeight(!0)-15).nanoScroller()},t.prototype.show=function(t){var i=this;if(!this.visible&&!this.animating)return this.visible=!0,this.animating=!0,this.$container.animate({right:"0px"},{duration:500,easing:"easeInOutQuart",complete:function(){return i.animating=!1,"function"==typeof t?t():void 0}})},t.prototype.hide=function(t){var i=this;if(this.visible&&!this.animating)return this.visible=!1,this.animating=!0,this.$container.animate({right:""+-this.$container.width()+"px"},{duration:500,easing:"easeInOutCubic",complete:function(){return i.animating=!1,"function"==typeof t?t():void 0}})},t.prototype.setPlaylist=function(t){var i,n,e;for(this.playlist=t,this.$playlist.html(""),n=0,e=t.length;e>n;n++)i=t[n],this.$playlist.append($("<li>").text(i));return this.$playlistContainer.nanoScroller()},t.prototype.on=function(t,i){return this[""+t+"Callback"]=i},t.prototype.onplay=function(){return this.$playBtn.hide(),this.$pauseBtn.show(),"function"==typeof this.playCallback?this.playCallback():void 0},t.prototype.onpause=function(){return this.$pauseBtn.hide(),this.$playBtn.show(),"function"==typeof this.pauseCallback?this.pauseCallback():void 0},t.prototype.onresume=function(){return this.$playBtn.hide(),this.$pauseBtn.show(),"function"==typeof this.resumeCallback?this.resumeCallback():void 0},t.prototype.onstop=function(){return this.$pauseBtn.hide(),this.$playBtn.show(),"function"==typeof this.stopCallback?this.stopCallback():void 0},t.prototype.onprev=function(){return this.currentTrackId>0?(this.currentTrackId-=1,this.setTrack(this.currentTrackId)):void 0},t.prototype.onnext=function(){return this.currentTrackId<this.playlist.length-1?(this.currentTrackId+=1,this.setTrack(this.currentTrackId)):void 0},$("#playlst").click(function(){return player.show(),playlstb=!0,$("#playlstx").show(),$("#playlst").hide(),!1}),$("#playlstx").click(function(){return player.hide(),playlstb=!1,$("#playlst").show(),$("#playlstx").hide(),!1}),t.prototype.ontrackchange=function(t){var i;if(t>=0&&t<this.playlist.length)return this.stop(),null!=(i=this.$currentTrack)&&i.removeClass("player-current-track"),this.$currentTrack=this.$playlist.find("li").eq(t).addClass("player-current-track"),"function"==typeof this.trackchangeCallback&&this.trackchangeCallback(t),this.currentTrackId=t},t.prototype.setTrack=function(t){if(allL){$("#overLy").fadeIn(),cXpos2=0,cIndex2=0,myVar2=setTimeout("continueAnimation2()",1e3*SECONDS_BETWEEN_FRAMES2);var i=t+1;switch(i){case 1:trak5B?(buffAudio.initNewBuffer(adBuff5),overLyStop()):loadAudioBuffer("tttrakz/br128/TTT05Engrams.mp3",1)}}return window.location.hash=t+1},t.prototype.setTrackFromHash=function(){var t;return t=window.location.hash.slice(1),t?this.ontrackchange(parseInt(t,10)-1):void 0},t.prototype.getRandomTrack=function(){return this.playlist[Math.floor(Math.random()*this.playlist.length)]},t.prototype.displayProgress=function(t){var i,n,e,s,r;return n=t.current,r=t.total,n=Math.min(n,r),e=n/r,this.$progressBar.width(this.$progressContainer.width()*e),i=this._formatTime(n),s=this._formatTime(r),this.$progressText.text(""+i+" / "+s)},t.prototype._formatTime=function(t){var i,n;return i=t/60>>0,n=String(t-60*i>>0),1===n.length&&(n="0"+n),""+i+":"+n},t}(),StateMachine.create({target:t.prototype,events:[{name:"init",from:"none",to:"ready"},{name:"play",from:"ready",to:"playing"},{name:"pause",from:"playing",to:"paused"},{name:"resume",from:"paused",to:"playing"},{name:"stop",from:"*",to:"ready"}]}),this.PlayerWidget=t}).call(this);