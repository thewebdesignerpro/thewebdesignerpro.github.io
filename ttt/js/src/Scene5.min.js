(function(){var e,t,a,o,n,i,r,s,d,h,c,p,l,m,E,w,u,v=function(e,t){return function(){return e.apply(t,arguments)}},g=(mouseY=mouseZ=0,window.innerWidth),f=window.innerHeight,T=g/2,M=f/2,H=document.getElementById("canvas"),g=(y=z=pis=0,new THREE.Geometry,clfMf2=munb=!1,new THREE.Geometry,window.innerWidth),f=window.innerHeight,T=g/2,M=f/2,R=(new THREE.Group,new THREE.Group,new THREE.Group),S=[],x=(tttB=kld=!1,0);e=function(){function e(e){function g(){var e=new THREE.IcosahedronGeometry(360,2);E=new THREE.Mesh(e,new THREE.MeshBasicMaterial({map:X,side:THREE.BackSide,fog:!1,transparent:!0,opacity:.99})),W.add(E)}function f(){J.load("objs/tttB.obj",function(e,o){var n=new THREE.MeshLambertMaterial({color:11688812,map:Z,fog:!0});e.traverse(function(e){e instanceof THREE.Mesh&&(e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals(),e.castShadow=!0,e.receiveShadow=!0,e.material=n,a=new THREE.EdgesHelper(e,6908265,1),W.add(a),a.material.transparent=!0,a.material.opacity=.2)}),t=e,W.add(t),t.position.set(0,-9.5,0),cIndex<cTotalFrames-1&&(cXpos+=cFrameWidth,cIndex+=1),L()})}function T(){var e=new THREE.MeshLambertMaterial({color:11190479,map:_,wrapAround:!0,overdraw:.5,fog:!1});e.wrapRGB.set(.5,.5,.5),n=new THREE.Mesh(new THREE.SphereGeometry(30,24,24),e),n.position.set(0,15,-300),W.add(n);var e=new THREE.MeshLambertMaterial({color:65793,wrapAround:!0,overdraw:.5,fog:!0});e.wrapRGB.set(.2,.2,.2),i=new THREE.Mesh(new THREE.SphereGeometry(18,24,24),e),i.position.set(0,8.5,-160),i.castShadow=!0,W.add(i),munb=!0}function M(){J.load("objs/ttt.obj",function(e,t){var a=new THREE.MeshPhongMaterial({emissive:3809048,color:10322555,shininess:6,fog:!0});e.traverse(function(e){e instanceof THREE.Mesh&&(e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals(),e.castShadow=!0,e.receiveShadow=!0,e.material=a)}),o=e,W.add(o),o.scale.set(2,2,2.5),o.position.set(0,-9.85,-4),cIndex<cTotalFrames-1&&(cXpos+=cFrameWidth,cIndex+=1)})}function H(){var e=new THREE.MeshPhongMaterial({shading:THREE.FlatShading,shininess:15,map:Y}),t=new THREE.MeshBasicMaterial({color:7433822,wireframe:!0,opacity:.1,transparent:!0}),a=new THREE.TorusGeometry(8.6,1.4,3,20);r=new THREE.Mesh(a,e),W.add(r),r.rotation.set(Math.PI*-.5,0,0),r.position.set(0,10,0);var a=new THREE.TorusGeometry(8.65,1.45,3.05,20);s=new THREE.Mesh(a,t),W.add(s),s.rotation.set(Math.PI*-.5,0,0),s.position.set(0,10,0),clfMf2=!0}function b(){J.load("objs/swip2.obj",function(e,t){var a=new THREE.MeshLambertMaterial({color:10066329,emissive:3355443,fog:!0,transparent:!0,opacity:.3});e.traverse(function(e){e instanceof THREE.Mesh&&(e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals(),e.castShadow=!0,e.material=a)});for(var o=0;12>o;o++){S[o]=e.clone();var n=Math.random()-.5;do var i=Math.random()-.5,r=Math.random()-.5;while(Math.abs(i)<.15&&Math.abs(r)<.15);S[o].position.set(i,n,r),S[o].position.normalize(),S[o].position.multiplyScalar(44),S[o].position.y=9*Math.random()+3,R.add(S[o]),S[o].lookAt(W.position)}W.add(R),kld=!0})}function L(){m=new THREE.PlaneGeometry(20,20,16,16),x=m.vertices.length;for(var e=new Array(x),t=0;x>t;t++)e[t]=m.vertices[t].clone();m._origV=e,d=new THREE.Mirror(P,I,{clipBias:.003,textureWidth:D,textureHeight:N,color:8421504}),h=new THREE.Mesh(m,d.material),h.add(d),h.rotateX(-Math.PI/2),W.add(h),h.position.set(0,-9.95,0);var a=new THREE.PlaneBufferGeometry(20,20);c=new THREE.Mirror(P,I,{clipBias:.003,textureWidth:8,textureHeight:8,color:8421504}),p=new THREE.Mesh(a,c.material),p.add(c),p.position.z=-10,p.position.y=.05,c.visibility=!1;var o=new THREE.MeshPhongMaterial({shading:THREE.FlatShading,shininess:15,map:Y}),n=new THREE.TorusGeometry(9,1.9,3,20);l=new THREE.Mesh(n,o),W.add(l),l.rotation.set(Math.PI*-.5,0,0),l.position.set(0,-10.2,0),l.castShadow=!0,l.receiveShadow=!0,tttB=!0}this.animate=v(this.animate,this),this.onresize=v(this.onresize,this);var B,I,G,C,P,W,F;B=$(e),F=window.innerWidth,C=window.innerHeight,W=new THREE.Scene,I=new THREE.PerspectiveCamera(60,F/C,.01,1e5),I.lookAt(new THREE.Vector3),W.add(I),P=new THREE.WebGLRenderer({antialias:!0,alpha:!0,sortObjects:!1}),P.setSize(F,C),P.shadowMapEnabled=!0,P.shadowMapSoft=!0,P.shadowMapType=THREE.PCFShadowMap,P.gammaInput=!0,P.gammaOutput=!0,B.append(P.domElement),G=new THREE.OrbitControls(I,P.domElement),G.center.set(0,0,0),G.autoRotateSpeed=.4,G.minDistance=3,G.maxDistance=400,I.position.copy(G.center).add(new THREE.Vector3(0,3,26)),$(window).resize(this.onresize),this.$container=B,this.camera=I,this.scene=W,this.renderer=P,this.controls=G,W.fog=new THREE.FogExp2(4014919,.0015);var j=new THREE.AmbientLight(2236962);W.add(j),light=new THREE.PointLight(16777215,12,400),light.position.set(0,10,-200),W.add(light),spotL=new THREE.SpotLight(16777215,1,500,Math.PI/3),spotL.position.set(0,10,-200),spotL.onlyShadow=!0,spotL.castShadow=!0,spotL.shadowMapWidth=1024,spotL.shadowMapHeight=1024,spotL.shadowDarkness=.35,spotL.shadowCameraNear=10,spotL.shadowCameraFar=500,spotL.shadowCameraFov=80,spotL.shadowBias=-2e-5,W.add(spotL),spotL.lookAt(W.position);var G,A,k,D=(mouseY=mouseZ=0,window.innerWidth),N=window.innerHeight,V=document.getElementById("canvas");y=z=pis=0;document.body.style.width=D+"px",document.body.style.height=N+"px",V.style.width=D+"px",V.style.height=N+"px",Detector.webgl||Detector.addGetWebGLMessage();var e=document.getElementById("canvas"),U=document.createElement("canvas");U.width=16,U.height=1024;var O=U.getContext("2d"),q=O.createLinearGradient(0,0,0,1024);q.addColorStop(0,"#01060d"),q.addColorStop(.18,"#102030"),q.addColorStop(.32,"#243246"),q.addColorStop(.42,"#2e424d"),q.addColorStop(.5,"#43494d"),q.addColorStop(.7,"#3e525d"),q.addColorStop(.8,"#344256"),q.addColorStop(.9,"#203040"),q.addColorStop(1,"#11161d"),O.fillStyle=q,O.fillRect(0,0,U.width,U.height);var X=new THREE.Texture(U);X.needsUpdate=!0;var Y=THREE.ImageUtils.loadTexture("imj/shade/glyp3.jpg",void 0,H),Z=THREE.ImageUtils.loadTexture("imj/shade/sand5.jpg",void 0,f),_=THREE.ImageUtils.loadTexture("imj/shade/mun3.png",void 0,T);Z.wrapS=Z.wrapT=THREE.MirroredRepeatWrapping,Y.wrapS=Y.wrapT=THREE.RepeatWrapping,Y.repeat.set(6,2),Z.repeat.set(32,32),g();var J=new THREE.OBJLoader;A=new THREE.Geometry;for(var K=0;2e3>K;K++){var Q=new THREE.Vector3;do Q.x=1600*Math.random()-800,Q.y=1600*Math.random()-800,Q.z=1600*Math.random()-800;while(Q.length()>800||Q.length()<400);A.vertices.push(Q)}A.computeBoundingSphere(),k=new THREE.PointCloudMaterial({size:2.8});var ee=new THREE.PointCloud(A,k);W.add(ee),M(),b();var te=function(){function e(e){return e*e*e*(e*(6*e-15)+10)}function t(e,t,a){return t+e*(a-t)}function a(e,t,a,o){var n=15&e,i=8>n?t:a,r=4>n?a:12==n||14==n?t:o;return(0==(1&n)?i:-i)+(0==(2&n)?r:-r)}for(var o=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],n=0;256>n;n++)o[256+n]=o[n];return{noise:function(n,i,r){var s=~~n,d=~~i,h=~~r,c=255&s,p=255&d,l=255&h;n-=s,i-=d,r-=h;var m=n-1,E=i-1,w=r-1,u=e(n),y=e(i),v=e(r),g=o[c]+p,f=o[g]+l,T=o[g+1]+l,M=o[c+1]+p,H=o[M]+l,R=o[M+1]+l;return t(v,t(y,t(u,a(o[f],n,i,r),a(o[H],m,i,r)),t(u,a(o[T],n,E,r),a(o[R],m,E,r))),t(y,t(u,a(o[f+1],n,i,w),a(o[H+1],m,i,r-1)),t(u,a(o[T+1],n,E,w),a(o[R+1],m,E,w))))}}};w=function(){function e(){d=[],h=[],c=[],l=new Uint8Array(analyser.frequencyBinCount),m=new Uint8Array(analyser.frequencyBinCount);var e=new THREE.Shape;e.absarc(0,0,n,0,2*Math.PI,!1),p=e.createPointsGeometry(i/2),p.dynamic=!0,W.add(u),u.rotation.x=-Math.PI/2;for(var t=1,a=0;o>a;a++){var r=new THREE.LineBasicMaterial({color:16777215,transparent:!0,opacity:0,blending:THREE.AdditiveBlending}),s=new THREE.Line(p,r);d.push(s),t*=1.3,s.scale.x=t,s.scale.y=t,u.add(s),h.push(0),c.push(0)}}function t(){if(u)for(var e=0;o>e;e++)u.remove(d[e])}function a(){analyser.getByteFrequencyData(l),analyser.getByteTimeDomainData(m);for(var e=0,t=0;s>t;t++)e+=l[t];var a=e/s,n=a/256*r;h.push(n),h.shift(1),w+=.005;var u=Math.abs(E.noise(w,0,0));c.push(u),c.shift(1);for(var y=0;i>y;y++)p.vertices[y].z=.25*m[y];for(p.vertices[i].z=p.vertices[0].z,p.verticesNeedUpdate=!0,t=0;o>t;t++){var v=o-t-1,g=h[v]+.01,f=c[t];d[t].material.color.setHSL(f,1,g),d[t].material.linewidth=3*g,d[t].material.opacity=1.3*g,d[t].scale.z=g}}var o=14,n=8,i=160,r=2,s=256,d=ring=[],h=[],c=[];u=new THREE.Object3D;var p,l,m,E=new te,w=0;return{init:e,update:a,remove:t,pulsas:u}}()}function b(e){if(g=window.innerWidth,f=window.innerHeight,T=g/2,M=f/2,document.body.style.width=H.style.width=g+"px",document.body.style.height=H.style.height=f+"px",!playlstb){var t=-1*$("#player").width();$("#player").css("right",t)}}return e.prototype.onresize=function(){var e,t,a;return a=[this.$container.width(),this.$container.height()],t=a[0],e=a[1],g=window.innerWidth,f=window.innerHeight,T=g/2,M=f/2,this.camera.aspect=g/f,this.camera.updateProjectionMatrix(),this.renderer.setSize(g,f)},window.addEventListener("resize",b,!1),e.prototype.add=function(e){return this.scene.add(e)},e.prototype.remove=function(e){return this.scene.remove(e)},e.prototype.animate=function(e){var t=this;requestAnimationFrame(function(){return t.animate(e)}),"function"==typeof e&&e();var o=(new Date).getTime();if(clfMf2&&planim&&(r.rotation.z+=.01,s.rotation.z+=.01),R.rotation.y+=4e-4,kld)for(var h=0;12>h;h++)S[h].lookAt(this.scene.position);if(planim&&tttB){for(var h=0;x>h;h++){var p=m._origV[h],l=m.vertices[h],y=.004*o;l.x=p.x+.05*Math.sin(y),l.y=p.y+.05*Math.sin(y),l.z=p.z+.1*Math.cos(y+h)}m.verticesNeedUpdate=!0,u.position.y=5,w.update()}if(tttB){d.renderWithMirror(c);var v=Math.max(Math.abs(this.camera.position.x),Math.abs(this.camera.position.y),Math.abs(this.camera.position.z));E.material.opacity=.99-.003*v,a.material.opacity=.2-6e-4*v}if(144==notemsg?light.intensity<28&&(light.intensity+=.3):128==notemsg?light.intensity>3&&(light.intensity-=.4):light.intensity=12,munb){var g=300*Math.sin(25e-6*o),f=300*Math.cos(25e-6*o),T=(200*Math.sin(25e-6*o),200*Math.cos(25e-6*o),160*Math.cos(5e-5*o)),M=160*Math.sin(5e-5*o),H=200*Math.sin(25e-6*o),b=200*Math.cos(25e-6*o);n.position.x=g,n.position.z=f,spotL.position.x=H,spotL.position.z=b,i.position.x=T,i.position.z=M,light.position.x=H,light.position.z=b}if(1==mcount&&tttB&&!allL)if(pis<1)pis+=.05,document.getElementById("canvas").style.opacity=pis,document.getElementById("player").style.opacity=pis;else{if(cXpos=20*cFrameWidth,cIndex=20,document.getElementById("canvas").style.opacity=1,document.getElementById("player").style.opacity=1,allL=!0,$("#sharer").show(),$("#minfo2").show(),$("#minfo").show(),window.location.hash){var L=window.location.hash.slice(1);player.setTrack(parseInt(L,10)-1)}w.init(),clearTimeout(myVar),$("#overLy1").fadeOut(4e3)}return this.controls.update(),this.renderer.render(this.scene,this.camera)},e}(),this.Scene=e}).call(this);