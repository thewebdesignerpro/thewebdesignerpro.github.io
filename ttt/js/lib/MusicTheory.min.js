var invertObject=function(e){if(e.length)for(var r={},n=0;n<e.length;n++)r[e[n]]=n;else{var r={};for(var n in e)r[e[n]]=n}return r};"undefined"==typeof MusicTheory&&(MusicTheory={}),function(){var e=MusicTheory;e.key2number={A:0,"A#":1,Bb:1,B:2,C:3,"C#":4,Db:4,D:5,"D#":6,Eb:6,E:7,F:8,"F#":9,Gb:9,G:10,"G#":11,Ab:11},e.number2float={0:0,1:.5,2:1,3:2,4:2.5,5:3,6:3.5,7:4,8:5,9:5.5,10:6,11:6.5,12:7},e.number2key=invertObject(e.key2number),e.float2number=invertObject(e.number2float),e.getKeySignature=function(e){var r=["A","AB","B","C","CD","D","DE","E","F","FG","G","GA"],n=["F","C","G","D","A","E","B"],t={Fb:-8,Cb:-7,Gb:-6,Db:-5,Ab:-4,Eb:-3,Bb:-2,F:-1,C:0,G:1,D:2,A:3,E:4,B:5,"F#":6,"C#":7,"G#":8,"D#":9,"A#":10,"E#":11,"B#":12}[e];n=0>t?n.splice(7+t,-t).reverse().join(""):n.splice(0,t).join("");for(var o=0;o<r.length;o++)r[o].length>1&&(-1!=n.indexOf(r[o][0])||-1!=n.indexOf(r[o][1])?t>0?r[o]=r[o][0]+"#":r[o]=r[o][1]+"b":r[o]=r[o][0]+"#");Piano.keySignature=r},e.tempoFromTap=function(e){function r(e){for(var r={200:"Prestissimo",168:"Presto",140:"Vivace",120:"Allegro",112:"Allegretto",101:"Moderato",76:"Andante",66:"Adagio",60:"Larghetto",40:"Lento",0:"Larghissimo"},n=0,t="";250>n;n++)if(r[n]&&(t=r[n]),n>e)return t;return"Prestissimo"}if(e.tap){var n=(new Date).getTime()-e.tap,t=1/(n/1e3)*60;Piano.tempo=t,console.log(r(t),t,n),document.getElementById("taptap").value=(t>>0)+"bmp "+r(t)}e.tap=(new Date).getTime()},e.findChord=function(e){function r(e){var r={};for(var n in e){var t={};for(var o in e[n])t[e[n][o]]=1;r[n]=t}return r}var n={},t="0 3".split(" "),o=r(Piano.chords);for(var a in o)for(var i=0,b=t.length;b>i;i++)if(isNaN(o[a][t[i]])){n[a]=1;break}var s=[];for(var a in o)n[a]||s.push(a);return document.getElementById("find").value=s,s},e.scaleInfo=function(e){var r=["r","b2","2","b3","3","4","b5","5","&#X266F;5","6","b7","7","8","b9","9","&#X266F;9","10","11","b12","12","&#X266F;12","13"],n="",t="",o="",a="",i="";for(var b in e){e[b]>0&&(o+="-"+(e[b]-s));var s=e[b],u=Piano.calculateNote(s)%12,l=Piano.keySignature[u];Piano.Color[Piano.HSL].english[u];a+=", "+MusicTheory.Solfege[l].syllable,i+=", "+s,n+=", "+l,t+=", "+r[s]}console.log("<b>notes:</b> "+n.substr(2)+"<br><b>solfege:</b> "+a.substr(2)+"<br><b>intervals:</b> "+t.substr(2)+"<br><b>keys:</b> "+i.substr(2)+"<br><b>gaps:</b> "+o.substr(1))}}();