if("undefined"==typeof MIDI)var MIDI={};"undefined"==typeof MIDI.Plugin&&(MIDI.Plugin={}),function(){"use strict";"undefined"==typeof MIDI.WebAudioAPI&&(MIDI.WebAudioAPI={}),(window.AudioContext||window.webkitAudioContext)&&function(){var n,e=window.AudioContext||window.webkitAudioContext,o=MIDI.WebAudioAPI,t={},a=1,r={},i=function(e,o,t,a){var r=e[o],i=MIDI.Soundfont[r].split(",")[1],c=Base64Binary.decodeArrayBuffer(i);n.decodeAudioData(c,function(n){for(var i=r;i.length<3;)i+="&nbsp;";if("undefined"!=typeof loader&&loader.message((o/87*100>>0)+"%<br>"),(o/87*100>>0)%6==0&&cIndex<cTotalFrames-1&&(cXpos+=cFrameWidth,cIndex+=1),n.id=r,t[o]=n,t.length===e.length){for(;t.length;)n=t.pop(),!$.browser.mozilla;a()}})};document.getElementById("volumt").addEventListener("input",function(n){a=this.value,gainNode2.gain.value=this.value},!1),o.setVolume=function(n){a=n},o.programChange=function(n){},o.noteOn=function(e,o,i,c){if(r[o]){c<n.currentTime&&(c+=n.currentTime);var u=n.createBufferSource();t[e+""+o]=u,u.buffer=r[o],u.connect(n.destination);var s=n.createGainNode?n.createGainNode():n.createGain(),d=-.5+i/100*2,f=2*(1-a);return s.connect(n.destination),s.gain.value=Math.max(-1,d-f),u.connect(s),u.start?u.start(c||0):u.noteOn(c||0),u}},o.chordOn=function(n,e,t,a){for(var r,i={},c=0,u=e.length;u>c;c++)i[r=e[c]]=o.noteOn(n,r,t,a);return i},o.noteOff=function(n,e,o){},o.chordOff=function(n,e,o){},o.connect=function(t){MIDI.lang="WebAudioAPI",MIDI.setVolume=o.setVolume,MIDI.programChange=o.programChange,MIDI.noteOn=o.noteOn,MIDI.noteOff=o.noteOff,MIDI.chordOn=o.chordOn,MIDI.chordOff=o.chordOff,MIDI.Player.ctx=n=new e;var a=[],r=MIDI.keyToNote;for(var c in r)a.push(c);for(var u=[],s=0;s<a.length;s++)i(a,s,u,t)}}(),window.Audio&&function(){for(var n=MIDI.HTML5={},e={},o=1,t=-1,a={},r=[],i={},c=0;12>c;c++)r[c]=new Audio;var u=function(n){var e=i[n];if(e){var c=(t+1)%r.length,u=((new Date).getTime(),r[c]);a[e.id]=u,u.src=MIDI.Soundfont[e.id],u.volume=o,u.play(),t=c}};n.programChange=function(){},n.setVolume=function(n){o=n},n.noteOn=function(n,o,t,a){var r=e[o];if(i[r]){if(a){var c=window.setTimeout(function(){u(r)},1e3*a);return c}u(r)}},n.noteOff=function(n,e,o){},n.chordOn=function(n,o,t,a){for(var r in o){var c=o[r],s=e[c];i[s]&&u(s)}},n.chordOff=function(n,e,o){},n.stopAllNotes=function(){for(var n=0,e=r.length;e>n;n++)r[n].pause()},n.connect=function(o){for(var t in MIDI.keyToNote)e[MIDI.keyToNote[t]]=t,i[t]={id:t};MIDI.lang="HTML5",MIDI.setVolume=n.setVolume,MIDI.programChange=n.programChange,MIDI.noteOn=n.noteOn,MIDI.noteOff=n.noteOff,MIDI.chordOn=n.chordOn,MIDI.chordOff=n.chordOff,o&&o()}}(),function(){var n=MIDI.Flash={},e={},o={};n.programChange=function(){},n.setVolume=function(n,e){},n.noteOn=function(n,t,a,r){var i=e[t];if(o[i]){if(r){var c=window.setTimeout(function(){o[i].play({volume:2*a})},1e3*r);return c}o[i].play({volume:2*a})}},n.noteOff=function(n,e,o){},n.chordOn=function(n,t,a,r){for(var i in t){var c=t[i],u=e[c];o[u]&&o[u].play({volume:2*a})}},n.chordOff=function(n,e,o){},n.stopAllNotes=function(){},n.connect=function(t){soundManager.flashVersion=9,soundManager.useHTML5Audio=!0,soundManager.url="../../swf/",soundManager.useHighPerformance=!0,soundManager.wmode="transparent",soundManager.flashPollingInterval=1,soundManager.debugMode=!1,soundManager.onload=function(){for(var a=[],r=function(){a.push(this.sID),"undefined"!=typeof loader&&loader.message("Processing: "+this.sID)},i=10;75>i;i++){var c=e[i+26];o[c]=soundManager.createSound({id:c,url:"./soundfont/mp3/"+c+".mp3",multiShot:!0,autoLoad:!0,onload:r})}MIDI.lang="Flash",MIDI.setVolume=n.setVolume,MIDI.programChange=n.programChange,MIDI.noteOn=n.noteOn,MIDI.noteOff=n.noteOff,MIDI.chordOn=n.chordOn,MIDI.chordOff=n.chordOff;var u=window.setInterval(function(){65===a.length&&(window.clearInterval(u),t&&t())},25)},soundManager.onerror=function(){};for(var a in MIDI.keyToNote)e[MIDI.keyToNote[a]]=a}}(),function(){var n=MIDI.Java={};n.connect=function(n){if(MIDI.Plugin=!1,!window.navigator.javaEnabled())return void MIDI.Flash.connect(n);MIDI.Java.callback=n;var e=document.createElement("iframe");e.name="MIDIFrame",e.src="inc/midibridge/index.html",e.width=1,e.height=1,document.body.appendChild(e)},n.confirm=function(n){MIDI.programChange=function(e){n.sendMidiEvent(192,0,e,0)},MIDI.setVolume=function(n){},MIDI.noteOn=function(e,o,t,a){if(a){var r=window.setTimeout(function(){n.sendMidiEvent(144,e,o,t)},1e3*a);return r}n.sendMidiEvent(144,e,o,t)},MIDI.noteOff=function(e,o,t){if(t){var a=window.setTimeout(function(){n.sendMidiEvent(128,e,o,0)},1e3*t);return a}n.sendMidiEvent(128,e,o,0)},MIDI.chordOn=function(e,o,t,a){for(var r in o){var i=o[r];n.sendMidiEvent(144,e,i,100)}},MIDI.chordOff=function(e,o,t){for(var a in o){var r=o[a];n.sendMidiEvent(128,e,r,100)}},MIDI.stopAllNotes=function(){},MIDI.getInstruments=function(){return[]},n.ready?(MIDI.lang="Java",MIDI.Java.callback&&MIDI.Java.callback()):MIDI.Flash.connect(MIDI.Java.callback)}}(),MIDI.instruments=function(n){var e={};for(var o in n)for(var t=n[o],a=0,r=t.length;r>a;a++){var i=t[a];if(i){var c=parseInt(i.substr(0,i.indexOf(" ")),10);i=i.replace(c+" ",""),e[--c]={instrument:i,category:o},e[i]={number:c,category:o}}}return e}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]}),MIDI.channels=function(){for(var n={},e=0;16>e;e++)n[e]={instrument:0,mute:!1,mono:!1,omni:!1,solo:!1};return n}(),MIDI.keyToNote={},MIDI.noteToKey={},function(){for(var n=21,e=108,o=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],t=n;e>=t;t++){var a=(t-12)/12>>0,r=o[t%12]+a;MIDI.keyToNote[r]=t,MIDI.noteToKey[t]=r}}()}(),MIDI.pianoKeyOffset=21;