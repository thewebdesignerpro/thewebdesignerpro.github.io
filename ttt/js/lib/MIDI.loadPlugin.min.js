if("undefined"==typeof MIDI)var MIDI={};"undefined"==typeof MIDI.Soundfont&&(MIDI.Soundfont={}),function(){"use strict";var n={"#webaudio":!0,"#html5":!0,"#java":!0,"#flash":!0};MIDI.loadPlugin=function(o,a){var e,s=window.loader,a=a||"";MIDI.audioDetect(function(d){if("undefined"==typeof e&&(e=n[window.location.hash]?window.location.hash:""),""===e){-1!==navigator.userAgent.toLowerCase().indexOf("safari");e=window.AudioContext?"#webaudio":window.Audio?"#html5":"#flash"}var t=d["audio/ogg"]?"ogg":"mp3",i="ogg"===t?3958964:3152665;switch(e){case"#java":s&&s.message("Soundfont (500KB)<br>Java Interface..."),MIDI.Java.connect(o);break;case"#flash":s&&s.message("Soundfont (2MB)<br>Flash Interface..."),DOMLoader.script.add({src:"./inc/SoundManager2/script/soundmanager2-jsmin.js",verify:"SoundManager",callback:function(){MIDI.Flash.connect(o)}});break;case"#html5":DOMLoader.sendRequest({url:"./soundfont/soundfont-"+t+".js",callback:function(n){MIDI.Soundfont=JSON.parse(n.responseText),MIDI.HTML5.connect(o)},progress:function(n){var o=Math.round(n.loaded/i*100);s&&s.message("Downloading: "+(o+"%"))}});break;case"#webaudio":DOMLoader.sendRequest({url:"./soundfont/soundfont-"+t+a+".js",callback:function(n){MIDI.Soundfont=JSON.parse(n.responseText),MIDI.WebAudioAPI.connect(o)},progress:function(n){var o=Math.round(n.loaded/i*100);s&&s.message("Loading: "+(o+"%"))}})}})}}();